!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):(t=t||self,n(t.fre={}))}(this,function(t){"use strict";function n(t,n){let e=[],o=[],i=arguments.length;for(;i-- >2;)e.push(arguments[i]);for(;e.length;){let t=e.pop();if(t&&t.pop)for(i=t.length;i--;)e.push(t[i]);else null===t||!0===t||!1===t||("function"==typeof t?o=t:o.push("object"!=typeof t?{type:"text",props:{nodeValue:t}}:t))}return{type:t,props:V(n,{children:o}),key:(n||{}).key||null}}function e(t,n,e,o){"children"===n||"key"===n||("style"===n?Object.keys(o).forEach(e=>{let i=o&&o[e]?o[e]:"";t[n][e]=i}):"o"===n[0]&&"n"===n[1]?(n=n.slice(2).toLowerCase(),e&&t.removeEventListener(n,e),t.addEventListener(n,o)):t.setAttribute(n,o))}function o(t,n,o){Object.keys(o).filter(w(n,o)).forEach(i=>{"value"===i||"nodeValue"===i?t[i]=o[i]:e(t,i,n[i],o[i])})}function i(t){const n="text"===t.type?document.createTextNode(""):document.createElement(t.type);return o(n,[],t.props),n}function u(t,n,e){const o=this?this:j();e=n?n(o.state[t],e):e,o.state[t]=e,d(o)}function c(){O=0}function r(t){return f(null,t)}function f(t,n){let e=j(),o="$"+O,i=u.bind(e,o,t);if(e){O++;let t=e.state||{};return"object"==typeof t&&o in t?[t[o],i]:(e.state[o]=n,[n,i])}return[n,i]}function s(t,n){let e=j();e&&(e.effect=a(t,n))}function a(t,n){return()=>{let e=j();if(e){let o=!n||(e.oldInputs||[]).some((t,e)=>n[e]!==t);!n||n.length||e.isMounted||(o=!0,e.isMounted=!0),o&&t(),e.oldInputs=n}}}function p(t={}){let n=[];return{context:t,update:t=>n.forEach(n=>n(t)),subscribe:t=>n.push(t),unSubscribe:t=>n=n.filter(n=>n!==t)}}function l(t){const[n,e]=r(t.context);return t.subscribe(e),s(()=>t.unSubscribe(e)),[n,t.update]}function h(t,n){let e={tag:D,base:n,props:{children:t}};$.push(e),I(y)}function d(t){$.push(t),I(y)}function y(t){if(!z&&$.length){const t=$.shift();if(!t)return;z=t}for(;z&&t.timeRemaining()>1;)z=g(z);(z||$.length>0)&&I(y),G&&L(()=>E(G))}function g(t){if(t.tag==q?m(t):b(t),t.child)return t.child;for(;t;){if(v(t),t.sibling)return t.sibling;t=t.parent}}function b(t){t.base||(t.base=i(t));let n=t.parent||{};t.insertPoint=n.oldPoint,n.oldPoint=t,k(t,t.props.children)}function m(t){t.props=t.props||{},t.state=t.state||{},H=t,c(),k(t,t.type(t.props)),H.patches=t.patches}function T(t,n){return n.children=S(t)}function k(t,n){const e=t.children,o=T(n,t);let i={};for(let n in e){let u=o[n],c=e[n];u&&c.type===u.type?(i[n]=c,u.key&&(c.key=u.key)):(c.patchTag=N,t.patches.push(c))}let u=null,c=null;for(let n in o){let e=o[n],r=i[n];r?M(r,e)&&(c=new x(r,{patchTag:F}),e.patchTag=F,(e=V(c,e)).alternate=c,r.key&&(e.patchTag=B)):e=new x(e,{patchTag:_}),o[n]=e,e.parent=t,u?u.sibling=e:t.child=e,u=e}u&&(u.sibling=null)}function x(t,n){this.patchTag=n.patchTag,this.tag=n.tag||"function"==typeof t.type?q:R,t.props=t.props||{nodeValue:t.nodeValue},A(this,t)}function v(t){t.parent?t.parent.patches=(t.parent.patches||[]).concat(t.patches||[],t.patchTag?[t]:[]):G=t}function E(t){t.patches.forEach(t=>P(t)),J=!1,H.effect&&H.effect(),z=G=null}function P(t){let n=t.parent;for(;n.tag==q;)n=n.parent;const e=n.base;let i=t.base;if(t.tag==q);else if(t.patchTag==F)o(i,t.alternate.props,t.props);else if(t.patchTag==N)e.removeChild(i);else{let n=J?null:t.insertPoint?t.patchTag==_?t.insertPoint.base.nextSibling:t.insertPoint.base.nextSibling||e.firstChild:null;if(n==i)return;e.insertBefore(i,n)}n.patches=t.patches=[]}function j(){return H||null}const C=t=>t?Array.isArray(t)?t:[t]:[],w=(t,n)=>e=>t[e]!==n[e],M=(t,n)=>t.type==n.type&&t.key==n.key,S=t=>{let n={};let e=0;C(t).forEach(t=>{let o=((t||{}).props||{}).key;o?n["."+o]=t:(n["."+e]=t)&&e++});return n},A=(t,n)=>{for(var e in n)t[e]=n[e]},V=(t,n)=>{let e={};for(var o in t)e[o]=t[o];for(var o in n)e[o]=n[o];return e},I=requestIdleCallback||((t,n=Date.now())=>setTimeout(()=>{t({timeRemaining:()=>Math.max(0,50-(Date.now()-n))})},1)),L=requestAnimationFrame||setTimeout;let O=0;const[R,q,D,_,B,F,N]=[0,1,2,3,4,5,6];let $=[],z=null,G=null,H=null,J=!0;t.createContext=p,t.h=n,t.render=h,t.useContext=l,t.useEffect=s,t.useMemo=a,t.useReducer=f,t.useState=r,Object.defineProperty(t,"__esModule",{value:!0})});
