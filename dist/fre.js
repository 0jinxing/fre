"use strict";function h(e,t){let n=[],r=[],o=arguments.length;for(;o-- >2;)n.push(arguments[o]);for(;n.length;){let e=n.pop();if(e&&e.pop)for(o=e.length;o--;)n.push(e[o]);else null===e||!0===e||!1===e||("function"==typeof e?r=e:r.push("object"!=typeof e?{type:"text",props:{nodeValue:e}}:e))}return{type:e,props:merge(t,{children:r}),key:(t||{}).key||null}}function updateProperty(e,t,n,r){"children"===t||"key"===t||("style"===t?Object.keys(r).forEach(n=>{let o=r&&r[n]?r[n]:"";e[t][n]=o}):"o"===t[0]&&"n"===t[1]?(t=t.slice(2).toLowerCase(),n&&e.removeEventListener(t,n),e.addEventListener(t,r)):e.setAttribute(t,r))}function updateElement(e,t,n){Object.keys(n).filter(isNew(t,n)).forEach(r=>{"value"===r||"nodeValue"===r?e[r]=n[r]:updateProperty(e,r,t[r],n[r])})}function createElement(e){const t="text"===e.type?document.createTextNode(""):document.createElement(e.type);return updateElement(t,[],e.props),t}function update(e,t,n){const r=this?this:getCurrentFiber();n=t?t(r.state[e],n):n,r.state[e]=n,scheduleWork(r)}function resetCursor(){cursor=0}function useState(e){return useReducer(null,e)}function useReducer(e,t){let n=getCurrentFiber(),r="$"+cursor,o=update.bind(n,r,e);if(n){cursor++;let e=n.state||{};return"object"==typeof e&&r in e?[e[r],o]:(n.state[r]=t,[t,o])}return[t,o]}function useEffect(e,t){let n=getCurrentFiber();n&&(n.effect=useMemo(e,t))}function useMemo(e,t){return()=>{let n=getCurrentFiber();if(n){let r=!t||(n.oldInputs||[]).some((e,n)=>t[n]!==e);!t||t.length||n.isMounted||(r=!0,n.isMounted=!0),r&&e(),n.oldInputs=t}}}function createContext(e={}){let t=[];return{context:e,update:e=>t.forEach(t=>t(e)),subscribe:e=>t.push(e),unSubscribe:e=>t=t.filter(t=>t!==e)}}function useContext(e){const[t,n]=useState(e.context);return e.subscribe(n),useEffect(()=>e.unSubscribe(n)),[t,e.update]}function render(e,t){let n={tag:ROOT,base:t,props:{children:e}};updateQueue.push(n),rIC(workLoop)}function scheduleWork(e){updateQueue.push(e),rIC(workLoop)}function workLoop(e){if(!nextWork&&updateQueue.length){const e=updateQueue.shift();if(!e)return;nextWork=e}for(;nextWork&&e.timeRemaining()>1;)nextWork=performWork(nextWork);(nextWork||updateQueue.length>0)&&rIC(workLoop),pendingCommit&&rAF(()=>commitWork(pendingCommit))}function performWork(e){if(e.tag==HOOK?updateHOOK(e):updateHost(e),e.child)return e.child;for(;e;){if(completeWork(e),e.sibling)return e.sibling;e=e.parent}}function updateHost(e){e.base||(e.base=createElement(e));let t=e.parent||{};e.insertPoint=t.oldPoint,t.oldPoint=e,reconcileChildren(e,e.props.children)}function updateHOOK(e){e.props=e.props||{},e.state=e.state||{},currentFiber=e,resetCursor(),reconcileChildren(e,e.type(e.props)),currentFiber.patches=e.patches}function fiberize(e,t){return t.children=hashfy(e)}function reconcileChildren(e,t){const n=e.children,r=fiberize(t,e);let o={};for(let t in n){let u=r[t],i=n[t];u&&i.type===u.type?(o[t]=i,u.key&&(i.key=u.key)):(i.patchTag=DELETE,e.patches.push(i))}let u=null,i=null;for(let t in r){let n=r[t],c=o[t];c?isSame(c,n)&&(i=new Fiber(c,{patchTag:UPDATE}),n.patchTag=UPDATE,(n=merge(i,n)).alternate=i,c.key&&(n.patchTag=REPLACE)):n=new Fiber(n,{patchTag:PLACE}),r[t]=n,n.parent=e,u?u.sibling=n:e.child=n,u=n}u&&(u.sibling=null)}function Fiber(e,t){this.patchTag=t.patchTag,this.tag=t.tag||"function"==typeof e.type?HOOK:HOST,e.props=e.props||{nodeValue:e.nodeValue},extend(this,e)}function completeWork(e){e.parent?e.parent.patches=(e.parent.patches||[]).concat(e.patches||[],e.patchTag?[e]:[]):pendingCommit=e}function commitWork(e){e.patches.forEach(e=>commit(e)),isRecycling=!1,currentFiber.effect&&currentFiber.effect(),nextWork=pendingCommit=null}function commit(e){let t=e.parent;for(;t.tag==HOOK;)t=t.parent;const n=t.base;let r=e.base;if(e.tag==HOOK);else if(e.patchTag==UPDATE)updateElement(r,e.alternate.props,e.props);else if(e.patchTag==DELETE)n.removeChild(r);else{let t=isRecycling?null:e.insertPoint?e.patchTag==PLACE?e.insertPoint.base.nextSibling:e.insertPoint.base.nextSibling||n.firstChild:null;if(t==r)return;n.insertBefore(r,t)}t.patches=e.patches=[]}function getCurrentFiber(){return currentFiber||null}Object.defineProperty(exports,"__esModule",{value:!0});const arrayfy=e=>e?Array.isArray(e)?e:[e]:[],isNew=(e,t)=>n=>e[n]!==t[n],isSame=(e,t)=>e.type==t.type&&e.key==t.key,hashfy=e=>{let t={};let n=0;arrayfy(e).forEach(e=>{let r=((e||{}).props||{}).key;r?t["."+r]=e:(t["."+n]=e)&&n++});return t},extend=(e,t)=>{for(var n in t)e[n]=t[n]},merge=(e,t)=>{let n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},rIC=requestIdleCallback||((e,t=Date.now())=>setTimeout(()=>{e({timeRemaining:()=>Math.max(0,50-(Date.now()-t))})},1)),rAF=requestAnimationFrame||setTimeout;let cursor=0;const[HOST,HOOK,ROOT,PLACE,REPLACE,UPDATE,DELETE]=[0,1,2,3,4,5,6];let updateQueue=[],nextWork=null,pendingCommit=null,currentFiber=null,isRecycling=!0;exports.createContext=createContext,exports.h=h,exports.render=render,exports.useContext=useContext,exports.useEffect=useEffect,exports.useMemo=useMemo,exports.useReducer=useReducer,exports.useState=useState;
